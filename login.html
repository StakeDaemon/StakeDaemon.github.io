<!DOCTYPE html>
<html>
<body>
<button id="loginBtn">Login with Google</button>

<div id="user"></div>

<script type="module">
import { createClient } from 'https://esm.sh/@supabase/supabase-js'

const supabase = createClient(
  'https://zgvluycfalorrgglyslf.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpndmx1eWNmYWxvcnJnZ2x5c2xmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NTM3MzcsImV4cCI6MjA3ODUyOTczN30.0SbpFSQUzm0BEsbIfaCsggW6iM1-qqG3UqexdntNzvw'
)

document.getElementById("loginBtn").onclick = async () => {
  await supabase.auth.signInWithOAuth({
    provider: "google",
    options: {
      redirectTo: "https://stake-daemon-github-io.vercel.app/auth/callback"
    }
  })
}

// listens after redirect
supabase.auth.onAuthStateChange(async (event, session) => {
  if (session?.user) {
    document.getElementById("user").innerHTML =
      "Logged in: " + session.user.email
  }
})
</script>
</body>
</html>
